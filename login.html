<html>
    <head>
        <title>Login Page</title>
         <!--Source:https://code.jquery.com/-->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src= "https://smtpjs.com/v3/smtp.js"></script> 
    </head>
    <body>
        <!--The field box for design-->
        <br>
        <fieldset class="fldset-class">
            <legend class="legend-class"><p style="font-size:30px">Login Page</p></legend>
        <form id="login" autocomplete="off">
           <p><label>Username</label><br>
            <input id="username" type="text" name="username" placeholder="username"/><br>
            <label>Password</label><br>
            <input id="password" type="password" name="password" placeholder="password"/><br>
            <input type="submit" value="Login"/></p> 

        </form>
        <br>
         <!--To go back to the signup page-->
        <p>Don't have an account here?</p>
        <a href="/signup">Sign up here</a>

        <script>
            $(document).ready(function(){
                $("#login").submit(function(e){
                    e.preventDefault() //Prevents page refresh
                    
                    var loginData = {
                        username: $("#username").val(),
                        password: $("#password").val(),
                    }
                   // Successfull popup if user credentials ok/accepted
                    $.post("/api/login", loginData, function(res){
                        if(res.success === true){
                            alert("Success!")
                            alert(res.response)
                            window.location.href = "/verification";
                        } 
                        else { // if not gives error code
                            if(res.reason) alert(res.reason)
                            else alert("Unknown error")
                        }
                    })
                })
            })
        </script>
    </body>
</html>